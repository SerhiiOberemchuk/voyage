<!-- HandwriteLetter.svelte -->
<script lang="ts">
  import { onMount } from "svelte";

  // Налаштування
  export let fill = "#eaffb1"; // колір заливки літери
  export let brush = 18; // товщина "пензля" у масці (підбирайте під форму)
  export let duration = 1600; // тривалість анімації, мс
  export let delay = 0; // затримка старту, мс
  export let width = 240; // ширина SVG (авто масштаб)

  // ваш контур (одна літера)
  const d = `M35.0767 9.72262C35.0127 9.85063 34.8527 10.0746 34.5967 10.3946C34.4047 10.7146 34.2127 10.9706 34.0207 11.1626C33.9567 11.2266 33.7647 11.4826 33.4447 11.9306C33.1247 12.3786 32.8047 12.8586 32.4847 13.3706C32.1647 13.8186 31.8767 14.2666 31.6207 14.7146C31.3647 15.0986 31.2367 15.2906 31.2367 15.2906C36.8687 15.2266 41.8927 15.1626 46.3087 15.0986C48.2287 15.0346 50.1167 15.0026 51.9727 15.0026C53.8287 14.9386 55.4927 14.8746 56.9647 14.8106C58.4367 14.7466 59.6527 14.6826 60.6127 14.6186C61.5727 14.5546 62.1167 14.4906 62.2447 14.4266C62.3727 14.3626 62.5327 14.3306 62.7247 14.3306C63.1727 14.3306 63.4607 14.5546 63.5887 15.0026C63.7167 15.3866 63.4927 15.6746 62.9167 15.8666C62.7247 15.9306 62.0847 15.9946 60.9967 16.0586C59.9727 16.1226 58.6607 16.1866 57.0607 16.2506C55.5247 16.3146 53.7647 16.3786 51.7807 16.4426C49.8607 16.5066 47.9087 16.5706 45.9247 16.6346C41.1887 16.7626 35.9087 16.8906 30.0847 17.0186C26.3727 22.7786 23.1727 28.2506 20.4847 33.4346C17.8607 38.5546 15.7167 43.0666 14.0527 46.9706C12.3887 50.8106 11.2367 53.8826 10.5967 56.1866C9.95669 58.4906 9.79668 59.6426 10.1167 59.6426C10.5007 59.6426 11.1407 59.3546 12.0367 58.7786C12.9327 58.1386 14.0207 57.3386 15.3007 56.3786C16.5167 55.3546 17.8287 54.2346 19.2367 53.0186C20.7087 51.7386 22.1807 50.4586 23.6527 49.1786C27.0447 46.1066 30.7887 42.6186 34.8847 38.7146C35.5887 38.8426 35.9087 39.0986 35.8447 39.4826C35.7807 39.8026 35.5567 40.1866 35.1727 40.6346C35.1087 40.6986 34.5967 41.1786 33.6367 42.0746C32.6767 42.9706 31.4607 44.1226 29.9887 45.5306C28.5167 46.9386 26.8847 48.4746 25.0927 50.1386C23.3007 51.7386 21.5407 53.3066 19.8127 54.8426C18.0847 56.3146 16.4847 57.6266 15.0127 58.7786C13.5407 59.9306 12.3887 60.6986 11.5567 61.0826C11.2367 61.2106 11.0127 61.3066 10.8847 61.3706C10.6927 61.3706 10.4367 61.4026 10.1167 61.4666C8.70868 61.4666 8.06869 60.6986 8.19669 59.1626C8.19669 58.1386 8.64469 56.3786 9.54069 53.8826C10.3727 51.3226 11.5247 48.3466 12.9967 44.9546C14.4687 41.4986 16.2287 37.7866 18.2767 33.8186C20.3887 29.7866 22.6287 25.7866 24.9967 21.8186C25.1887 21.4986 25.4447 21.0826 25.7647 20.5706C26.1487 19.9946 26.5007 19.4826 26.8207 19.0346C27.1407 18.5226 27.3967 18.1066 27.5887 17.7866C27.7807 17.4026 27.8767 17.2106 27.8767 17.2106C27.8767 17.2746 26.8847 17.3386 24.9007 17.4026C19.4607 17.7226 15.0767 18.0426 11.7487 18.3626C8.42069 18.6826 5.89269 18.8426 4.16469 18.8426C1.92469 18.8426 0.804688 18.3946 0.804688 17.4986C0.804688 17.1786 1.06069 16.7946 1.57269 16.3466C2.02069 15.8346 2.56469 15.3546 3.20469 14.9066C3.84469 14.4586 4.48469 14.0746 5.12469 13.7546C5.70069 13.4346 6.14869 13.2746 6.46869 13.2746C6.66069 13.2746 6.82068 13.3386 6.94868 13.4666C7.39668 13.9146 7.23669 14.3626 6.46869 14.8106C5.70069 15.1946 4.64469 15.8666 3.30069 16.8266C3.10869 16.9546 2.98069 17.0506 2.91669 17.1146C2.85269 17.1146 2.88469 17.1146 3.01269 17.1146H3.87669C3.87669 17.1146 4.26069 17.1146 5.02869 17.1146C5.73269 17.0506 6.69268 16.9866 7.90868 16.9226C9.12468 16.7946 10.5007 16.6986 12.0367 16.6346C13.5087 16.5066 15.0127 16.3786 16.5487 16.2506C20.1967 16.0586 24.3567 15.8026 29.0287 15.4826C29.1567 15.3546 29.5727 14.7146 30.2767 13.5626C31.0447 12.4106 31.8767 11.2586 32.7727 10.1066C33.5407 9.14663 34.0847 8.66663 34.4047 8.66663C34.4687 8.66663 34.5007 8.69863 34.5007 8.76262C34.5647 8.76262 34.6287 8.76262 34.6927 8.76262C35.1407 9.01863 35.2687 9.33862 35.0767 9.72262Z`;

  let maskPath: SVGPathElement;
  let pathLen = 0;

  onMount(() => {
    if (maskPath) pathLen = maskPath.getTotalLength();
  });
</script>

<svg
  {width}
  viewBox="0 0 70 70"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
  style="--len:{pathLen}; --dur:{duration}ms; --delay:{delay}ms"
>
  <defs>
    <!-- трохи пом’якшимо краї “пензля” -->
    <!-- <filter id="soft" x="-10%" y="-10%" width="120%" height="120%">
      <feGaussianBlur in="SourceGraphic" stdDeviation="0.6" />
    </filter> -->

    <mask id="reveal" maskUnits="userSpaceOnUse">
      <!-- <rect width="100%" height="100%" fill="black" /> -->
      <!-- Білий штрих у масці “пише” букву -->
      <path
        bind:this={maskPath}
        {d}
        fill="none"
        stroke="blue"
        stroke-width={brush}
        stroke-linecap="round"
        stroke-linejoin="round"
        class="mask-stroke"
        filter="url(#soft)"
      />
    </mask>
  </defs>

  <!-- Показуємо заповнену форму літери через маску, що “малюється” -->
  <g mask="url(#reveal)">
    <path {d} {fill} />
  </g>
</svg>

<style>
  .mask-stroke {
    stroke-dasharray: var(--len);
    stroke-dashoffset: var(--len);
    animation: draw var(--dur) ease var(--delay) forwards;
  }

  @keyframes draw {
    to {
      stroke-dashoffset: 0;
    }
  }
</style>
